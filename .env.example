# ============================================================
# Ultimate Trading Bot v2 — .env.example
# Copy to .env and fill in real values (DO NOT COMMIT .env)
# ============================================================

# ----------------------------
# App Mode
# ----------------------------
# backtest | paper | live
APP_MODE=paper

# ----------------------------
# Server / UI
# ----------------------------
APP_HOST=127.0.0.1
APP_PORT=5000
AUTO_OPEN_BROWSER=true
LOG_LEVEL=INFO

# ----------------------------
# Local Storage (PC-friendly)
# ----------------------------
DATABASE_URL=sqlite:///data/trading_bot.db
DATA_DIR=data
CACHE_DIR=data/cache
MODELS_DIR=models
LOGS_DIR=logs

# Data cache format (recommended: parquet for compression)
DATA_CACHE_FORMAT=parquet
DATA_COMPRESSION=zstd

# ----------------------------
# Alpaca (Required)
# ----------------------------
# Paper and Live have DIFFERENT keys. Paper requires paper=True on TradingClient.
ALPACA_PAPER_API_KEY=
ALPACA_PAPER_SECRET_KEY=

ALPACA_LIVE_API_KEY=
ALPACA_LIVE_SECRET_KEY=

# Optional overrides (leave empty to use SDK defaults)
# Defaults (per Alpaca docs / enums):
# - Trading paper: https://paper-api.alpaca.markets
# - Trading live : https://api.alpaca.markets
# - Data         : https://data.alpaca.markets
ALPACA_TRADING_BASE_URL=
ALPACA_DATA_BASE_URL=

# ----------------------------
# Universe / Watchlist
# ----------------------------
# If empty, watchlist will be managed from the panel + stored in DB.
WATCHLIST_DEFAULT=SPY,QQQ,AAPL,MSFT,NVDA
WATCHLIST_MAX_SIZE=200

# ----------------------------
# Trading Constraints (Long-only swing)
# ----------------------------
LONG_ONLY=true
ALLOW_SHORT=false
ALLOW_OPTIONS=false
ALLOW_CRYPTO=false
ALLOW_FX=false
TARGET_HOLD_DAYS_MIN=5
TARGET_HOLD_DAYS_MAX=14

# Market hours guard (optional)
TRADE_ONLY_MARKET_HOURS=true

# ----------------------------
# Risk Profiles (defaults; UI can override)
# ----------------------------
# conservative | balanced | aggressive
RISK_PROFILE=balanced

# Risk per trade (fraction of equity)
RISK_PER_TRADE=0.005

# Portfolio constraints
MAX_OPEN_POSITIONS=10
MAX_POSITION_WEIGHT=0.12
MAX_SECTOR_WEIGHT=0.30
MAX_SYMBOL_CORRELATION=0.85

# Cash buffer (keep idle to avoid over-alloc)
CASH_BUFFER=0.08

# Hard loss guards
DAILY_MAX_LOSS=0.02
WEEKLY_MAX_DRAWDOWN=0.05

# Stop/Take Profit defaults (used if strategy doesn’t specify)
STOP_METHOD=atr
ATR_PERIOD=14
ATR_MULTIPLIER_STOP=2.0
ATR_MULTIPLIER_TP=4.0
TRAILING_STOP_ENABLED=true
TRAILING_ATR_MULTIPLIER=2.5

# Rebalance settings
REBALANCE_FREQUENCY=weekly
REBALANCE_THRESHOLD=0.06

# ----------------------------
# Funding Alert (No-cash scenario)
# ----------------------------
FUNDING_ALERT_ENABLED=true

# If a new opportunity is better than a held position by this score gap, allow swap/trim suggestion
SWAP_SCORE_GAP_THRESHOLD=0.15

# Allow partial entry if cash insufficient
PARTIAL_ENTRY_ENABLED=true
PARTIAL_ENTRY_FRACTION=0.25

# Queue trades if cash insufficient (time-to-live)
TRADE_QUEUE_ENABLED=true
TRADE_QUEUE_TTL_HOURS=48

# Desktop notifications (optional; panel alerts always on)
DESKTOP_NOTIFICATIONS=true
NOTIFICATIONS_ENABLED=true

# ----------------------------
# Strategy Toggles (Price Action backbone)
# ----------------------------
ENABLE_SETUP_GATE=true
ENABLE_TREND_FOLLOWING=true
ENABLE_BREAKOUT=true
ENABLE_PULLBACK_RETEST=true
ENABLE_RSI_MOMENTUM=true
ENABLE_CANDLE_PATTERNS=true
ENABLE_FIB_PULLBACK=true
ENABLE_VOLUME_CONFIRM=true

# Ensemble settings
ENSEMBLE_METHOD=weighted
MIN_FINAL_SCORE_TO_TRADE=0.70

# ----------------------------
# Sentiment / News (Optional; free/low-cost)
# ----------------------------
ENABLE_SENTIMENT=true

# NewsAPI (optional)
NEWSAPI_KEY=

# Finnhub (optional)
FINNHUB_KEY=

# FRED (macro regime filter optional)
FRED_API_KEY=

# ----------------------------
# ML (MLOps-lite) — keep model current
# ----------------------------
ENABLE_ML=true

# Retrain triggers
RETRAIN_SCHEDULE=weekly
RETRAIN_ON_DRIFT=true
RETRAIN_ON_PERFORMANCE_DROP=true

# Walk-forward / validation
BACKTEST_YEARS=5
WALK_FORWARD_ENABLED=true
WALK_FORWARD_TRAIN_WINDOW_DAYS=504
WALK_FORWARD_TEST_WINDOW_DAYS=126

# Drift thresholds (example values; tune later)
DATA_DRIFT_THRESHOLD=0.15
PERFORMANCE_DRIFT_THRESHOLD=0.10
DRIFT_ALPHA=0.05

# Hyperparameter optimization
HPO_ENABLED=true
HPO_ENGINE=optuna
HPO_TRIALS=50

# Shadow test policy (paper only)
SHADOW_TEST_ON_PAPER=true
SHADOW_TEST_DAYS=3

# Model registry
MODEL_REGISTRY_ENABLED=true
MODEL_PROMOTION_POLICY=paper_pass_then_manual
MODEL_REGISTRY_DIR=models/registry

# Walk-forward backtest windows (trading days)
WALK_FORWARD_TRAIN_DAYS=504
WALK_FORWARD_TEST_DAYS=126
WALK_FORWARD_STEP_DAYS=63

# ----------------------------
# LIVE Trading Safety Lock
# ----------------------------
LIVE_LOCK_ENABLED=true

# UI requires: checkbox + PIN
LIVE_UNLOCK_PIN=

# Optional: extra confirmation phrase (UI)
LIVE_CONFIRM_PHRASE=I_UNDERSTAND_LIVE_TRADING_RISK

# ----------------------------
# OpenAI (Optional) — only if you use LLM for summarization/filtering
# ----------------------------
OPENAI_API_KEY=
